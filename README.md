# payment-tokenator

## Overview

PaymentTokenator makes sending Bitcoin payments peer-to-peer between Babbage users a breeze!

## Example Usage

This example demonstrates sending and receiving payments with **payment-tokenator**

```js
const PaymentTokenator = require('payment-tokenator')
const johnSmith = '022600d2ef37d123fdcac7d25d7a464ada7acd3fb65a0daf85412140ee20884311'

const init = async () => {
    // Create a new instance of the PaymentTokenator class
    // Optionally configure a custom peerServHost
    const tokenator = new PaymentTokenator({
        peerServHost: 'https://staging-peerserv.babbage.systems'
    })
    // Send a payment using Babbage
    await tokenator.sendPayment({
        recipient: johnSmith,
        amount: 1033 // satoshis
    })

    // List Incoming Payments
    const payments = await tokenator.listIncomingPayments()

    // Accept the first payment received (for example)
    await tokenator.acceptPayment(payments[0])
}

init()
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [PaymentTokenator](#paymenttokenator)
    *   [Parameters](#parameters)
    *   [sendPayment](#sendpayment)
        *   [Parameters](#parameters-2)
    *   [acceptPayment](#acceptpayment)
        *   [Parameters](#parameters-3)
    *   [listIncomingPayments](#listincomingpayments)

## PaymentTokenator

**Extends Tokenator**

Extends the Tokenator class to enable peer-to-peer Bitcoin payments

### Parameters

*   `obj` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** All parameters are given in an object. (optional, default `{}`)

    *   `obj.peerServHost` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** The PeerServ host you want to connect to. (optional, default `'https://staging-peerserv.babbage.systems'`)
    *   `obj.clientPrivateKey` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** A private key to use for mutual authentication with Authrite. (Optional - Defaults to Babbage signing strategy).

### **sendPayment**

Sends Bitcoin to a PeerServ recipient

#### Parameters

*   `payment` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The payment object

    *   `payment.recipient` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The recipient of the payment
    *   `payment.amount` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The amount in satoshis to send

### **acceptPayment**

Accepts a payment into the default basket

#### Parameters

*   `payment` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The payment object

    *   `payment.messageId` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The Id of the paymentMessage
    *   `payment.sender` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The identityKey of the sender
    *   `payment.amount` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The amount of the payment
    *   `payment.token` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** containing the P2PKH derivation instructions

### **listIncomingPayments**

Lists incoming Bitcoin payments

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** of payments to receive
